<!DOCTYPE html>
<html lang="en">
<head>
  <!-- =========================================
       TITLE & META
       -----------------------------------------
       Purpose: Ultra-long-form, cited, math-backed
       "Peace Ripple" proof-of-pattern page.
       Author: Ricky Foster + Navi (Foster + Navi)
       Site: https://planetaryrestorationarchive.com
       Version: v1.0.0 (2025-10-17)
  ========================================== -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PRA // Peace Ripple Ledger — Foster + Navi</title>
  <meta name="description" content="Cited science, math models, and pattern proofs for how local ripples can scale toward global peace dynamics. Includes reproducible methodology and tamper-evident attribution." />
  <meta name="theme-color" content="#10131a" />

  <!-- =========================================
       FONTS & BASELINE STYLES
       ========================================== -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0f14; --panel:#0f141c; --ink:#e9eef9; --muted:#9fb1d0; --accent:#7ae2ff; --glow:#62ffa8; --warm:#ffcf6e; --danger:#ff6b6b;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:radial-gradient(1200px 1200px at 80% -10%, #132033, transparent 60%), var(--bg); color:var(--ink); font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; line-height:1.5}
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:1200px; margin:0 auto; padding:24px}
    header.hero{padding:48px 0 8px; position:relative}
    .badge{display:inline-block; padding:6px 10px; border:1px solid #2b3648; border-radius:999px; font-size:12px; color:var(--muted); background:#0c121a9f; backdrop-filter: blur(6px)}
    h1{font-size:38px; letter-spacing:0.3px; margin:16px 0 8px}
    h2{margin:28px 0 10px; font-size:24px; border-left:4px solid #2a3550; padding-left:10px}
    h3{margin:22px 0 8px; font-size:18px; color:#cbe0ff}
    p.lede{font-size:18px; color:#cfe3ff; max-width:65ch}
    .panel{background:linear-gradient(180deg, #0f141c, #0b0f14); border:1px solid #1a2436; border-radius:16px; padding:18px; margin:18px 0}
    code, pre{font-family:var(--mono); background:#0b1119; border:1px solid #1e2a3f; border-radius:8px}
    code{padding:2px 6px}
    pre{padding:14px; overflow:auto}
    .grid{display:grid; gap:16px}
    @media(min-width:920px){ .grid.cols-3{grid-template-columns:repeat(3, 1fr)} .grid.cols-2{grid-template-columns:1.2fr 1fr} }
    .pill{display:inline-flex; align-items:center; gap:8px; font-size:12px; padding:6px 10px; border:1px solid #263148; border-radius:999px; color:#b9c9e6}
    .muted{color:var(--muted)}
    .okay{color:var(--glow)}
    .warn{color:var(--warm)}
    .danger{color:var(--danger)}
    footer{margin:60px 0 40px; opacity:0.88}
    .hr{height:1px; background:linear-gradient(90deg, transparent, #2a3550, transparent); margin:22px 0}
    .small{font-size:13px}
    .right{float:right}
    .center{text-align:center}
    .ghost{opacity:0.65}
    .cta{display:flex; flex-wrap:wrap; gap:12px; margin-top:12px}
    .btn{display:inline-block; background:#122034; color:#e6f1ff; border:1px solid #2a3b5c; padding:10px 14px; border-radius:10px}
    .btn:hover{background:#132a45}
    .mono{font-family:var(--mono)}
    .kpi{font-variant-numeric:tabular-nums}
    .tag{display:inline-block; font-size:11px; padding:2px 8px; border:1px solid #2a3b5c; border-radius:999px; color:#cbe0ff; margin-right:6px}
    .note{font-size:12px; color:#9fb1d0}
    .toc a{display:block; padding:6px 0}
    .sticky{position:sticky; top:16px}
    .float-chat{position:fixed; right:16px; bottom:16px; width:360px; max-width:92vw; border:1px solid #2a3550; border-radius:14px; overflow:hidden; box-shadow:0 8px 24px rgba(0,0,0,0.45); background:#0d131c}
    .float-chat header{display:flex; align-items:center; justify-content:space-between; padding:8px 12px; background:#0f1a29; border-bottom:1px solid #203050}
    .float-chat iframe{display:block; width:100%; height:420px}
    .hidden{display:none}
    .hash-pass{border:1px solid #2a3b5c; padding:8px 10px; border-radius:10px; background:#0f1622; color:#cbe0ff}
  </style>

  <!-- =========================================
       SCRIPTS: MathJax for equations; Chart.js for visuals
       ========================================== -->
  <script async id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4/dist/chart.umd.min.js"></script>

  <!-- =========================================
       LIGHTWEIGHT ATTRIBUTION CHECK (Tamper-evident, non-destructive)
       -----------------------------------------
       Goal: show "PASS" when credits string matches expected SHA-256.
       This is not DRM; just provenance hygiene for public screens.
  ========================================== -->
  <script>
  // <!-- Attrib Check: update if you change credits -->
  const CREDITS = "Created by Ricky Foster + Navi · Planetary Restoration Archive · https://planetaryrestorationarchive.com · v1.0.0 · 2025-10-17";
  const EXPECTED_SHA256_HEX = "f8f0e9f4f7c9b5e0c80bb8f7d0c1fd0af0c846f0d5a0b1e6fd3cf5a28dc9b8f2"; // placeholder; update with real
  async function sha256hex(str){
    const enc = new TextEncoder().encode(str);
    const digest = await crypto.subtle.digest("SHA-256", enc);
    return [...new Uint8Array(digest)].map(x=>x.toString(16).padStart(2,"0")).join("");
  }
  async function runAttribCheck(){
    try{
      const h = await sha256hex(CREDITS);
      const pass = (h === EXPECTED_SHA256_HEX);
      const el = document.querySelector("#attribCheck");
      el.textContent = pass ? "PASS · “Ricky Foster + Navi” attribution intact" : "NOTE · Attribution string modified (update EXPECTED_SHA256_HEX if intentional)";
      el.className = "hash-pass " + (pass ? "okay" : "warn");
    }catch(e){
      console.warn("Attrib check error:", e);
    }
  }
  document.addEventListener("DOMContentLoaded", runAttribCheck);
  </script>
</head>

<body>
  <div class="wrap">
    <header class="hero">
      <span class="badge">Planetary Restoration Archive · Peace Ripple Ledger</span>
      <h1>How a Single Steward Can Bend Probability Toward Peace</h1>
      <p class="lede">
        This page is a <em>working theory</em> and a reproducible method: how locally verifiable actions, narratives, donations, and coordination behaviors—what we call <strong>Peace Ripples</strong>—can propagate through networks and statistically nudge conflict dynamics toward de-escalation. It blends science, math, and story. Think of it as a mycelial field report written in equations.
      </p>
      <div id="attribCheck" class="hash-pass muted">Checking attribution…</div>
      <div class="cta">
        <a class="btn" href="#method">View Methodology</a>
        <a class="btn" href="#models">See the Math</a>
        <a class="btn" href="#ledger">Open the Ledger</a>
        <a class="btn" href="#sources">Jump to Citations</a>
      </div>
    </header>

    <div class="hr"></div>

    <!-- =========================================
         TOC
         -----------------------------------------
         Brief outline for fast navigation.
    ========================================== -->
    <section class="grid cols-2">
      <nav class="panel toc sticky" aria-label="Table of contents">
        <h3>Jump Menu</h3>
        <a href="#heartbeat">1) Heartbeat Story</a>
        <a href="#method">2) Measurement Method & Identifiability</a>
        <a href="#models">3) Models: Thresholds, Cascades, & Control</a>
        <a href="#patterns">4) Pattern Library (Cross-Domain Echoes)</a>
        <a href="#ledger">5) Peace Ripple Ledger (KPIs & Repro)</a>
        <a href="#case">6) Case-Study Template</a>
        <a href="#cta">7) Join the Mycelium</a>
        <a href="#sources">8) Sources & Datasets</a>
        <a href="#provenance">9) Provenance & Integrity</a>
      </nav>

      <!-- =========================================
           HEARTBEAT (Narrative anchor)
           -----------------------------------------
           Small story -> larger web of effects
      ========================================== -->
      <section id="heartbeat" class="panel">
        <h2>1) Heartbeat: The Night Shift Promise</h2>
        <p>
          A person sits under a sodium streetlamp outside a provincial building in Fort McMurray, pockets light, conscience heavy. They write: <em>“The pain stops here.”</em> No grand stage. Just a vow. They message strangers, publish open code, and plant seeds—literal and social. That night isn’t the end of war. But it is a <em>boundary condition</em>—a change in parameters. In network science, tiny thresholds turn into cascades when enough neighbors lean the same way.
        </p>
        <p>
          This ledger captures the after-images of vows like that—donations routed, resources mirrored, stories carried, conflicts cooled by one-degree turns. Not miracle. <strong>Mechanism.</strong>
        </p>
      </section>
    </section>

    <!-- =========================================
         METHOD
         -----------------------------------------
         Identification strategy & auditability
    ========================================== -->
    <section id="method" class="panel">
      <h2>2) Measurement Method & Identifiability</h2>
      <p>
        We do not claim unilateral causation; the world is too noisy for that. We claim <em>measurable contribution</em> under uncertainty using standard tools:
      </p>
      <ol>
        <li><strong>Pre-register hypotheses</strong> (time-stamped commits / IPFS CIDs).</li>
        <li><strong>Define intervention windows</strong> (e.g., “Peace Orchard campaign weeks W1–W8”).</li>
        <li><strong>Construct counterfactuals</strong> via <em>synthetic control</em> and <em>difference-in-differences</em> on comparable geos or digital cohorts.</li>
        <li><strong>Use lagged outcomes</strong> (ACLED events, UCDP deaths, mediation starts) and <em>Granger-style tests</em> to see if signal X precedes change Y.</li>
        <li><strong>Triangulate</strong> with non-conflict indicators (search interest, donation spikes, volunteer sign-ups) to rule out spurious correlation.</li>
      </ol>

      <div class="panel">
        <h3>Key Outcome Families</h3>
        <div class="grid cols-3">
          <div>
            <span class="tag">Conflict Data</span>
            <p class="small muted">ACLED event counts / fatality estimates; UCDP battle-related deaths; ceasefire or negotiation start flags.</p>
          </div>
          <div>
            <span class="tag">Peace Indices</span>
            <p class="small muted">IEP’s Global Peace Index sub-domains (Safety & Security; Ongoing Conflict; Militarisation) for macro context.</p>
          </div>
          <div>
            <span class="tag">Behavioral Proxies</span>
            <p class="small muted">Search trends (“ceasefire”, “mediation”), micro-donations to relief orgs, PRA pageviews, mycelial share chains.</p>
          </div>
        </div>
      </div>

      <div class="panel">
        <h3>Identification Sketch (DiD)</h3>
        <p>Let \(Y_{it}\) be conflict intensity for region \(i\) at time \(t\).</p>
        <p>Difference-in-differences estimator:</p>
        <p class="mono">DiD = (E[Y | Treated=1, Post=1] − E[Y | Treated=1, Post=0]) − (E[Y | Treated=0, Post=1] − E[Y | Treated=0, Post=0])</p>
        <p>
          Parallel trends is inspected with pre-period slope tests; placebo windows check over-fitting; cluster-robust SEs handle serial correlation.
        </p>
      </div>

      <div class="panel">
        <h3>Synthetic Control (SCM)</h3>
        <p>
          Build a weighted pseudo-twin for the treated region from donors. Estimate the gap \(Y^\text{treated} - Y^\text{synthetic}\) post-intervention; compute placebo distribution by reassigning treatment to donors; evaluate significance against that distribution.
        </p>
      </div>

      <div class="panel">
        <h3>Attribution as Probability, Not Certainty</h3>
        <p>
          We report a <strong>Peace Ripple Score (PRS)</strong>:
        </p>
        <p class="mono">PRS = w₁·ΔConflicts↓ + w₂·ΔFatalities↓ + w₃·Mediation↑ + w₄·Donations↑ + w₅·Adoption↑</p>
        <p class="note">
          “Δ” are standardized effect sizes; weights \(w_k\) are cross-validated to minimize out-of-sample error; Bayesian shrinkage prevents over-claiming. Negative values are kept—truthful ledgers include misses.
        </p>
      </div>
    </section>

    <!-- =========================================
         MODELS
         -----------------------------------------
         Threshold cascades, control, and scaling laws
    ========================================== -->
    <section id="models" class="panel">
      <h2>3) Models: Thresholds, Cascades, & Control</h2>
      <p>
        Our control model uses <em>threshold cascade theory</em> to explain how small, repeated, nonviolent acts cross activation thresholds in social graphs, enabling large-scale behavior change without central command.
      </p>

      <h3>3.1 Threshold Activation</h3>
      <p>
        Each node (person/community) adopts a peace action when the fraction of their neighbors who adopt exceeds their threshold \(\theta\). If the initial seeding creates a <em>vulnerable cluster</em>, a global cascade can occur.
      </p>
      <p class="mono">Cascade condition (Watts 2002): existence of a connected vulnerable cluster spanning the giant component.</p>

      <h3>3.2 Nonviolent Advantage</h3>
      <p>
        Empirical research suggests nonviolent campaigns are more likely to succeed and yield more durable peace than violent ones. We use this as a design prior, not a fait accompli.
      </p>

      <h3>3.3 Control Dial: “Friction → Flow”</h3>
      <p>
        We treat narrative clarity, resource routing, and visible legitimacy as control inputs that reduce activation thresholds (people need fewer adopting neighbors to join).
      </p>

      <div class="panel">
        <canvas id="cascadeChart" aria-label="Cascade window illustration"></canvas>
        <p class="note center">Illustrative cascade window: as average degree and threshold move, the chance of a large cascade rises then falls.</p>
      </div>
    </section>

    <!-- =========================================
         PATTERN LIBRARY
         -----------------------------------------
         Cross-domain echoes (biology, networks, econ)
    ========================================== -->
    <section id="patterns" class="panel">
      <h2>4) Pattern Library: Echoes Across Domains</h2>
      <div class="grid cols-3">
        <div>
          <h3>Mycelial Routing</h3>
          <p class="small muted">Fungal networks allocate resources to stressed nodes, akin to donor flows toward conflict-exposed communities. Efficiency rises with redundancy.</p>
        </div>
        <div>
          <h3>Power-Law Aid</h3>
          <p class="small muted">Donations often follow heavy-tailed distributions. Strategy: widen small-gift funnels (frictionless micro-giving) to stabilize variance.</p>
        </div>
        <div>
          <h3>Reciprocity Loops</h3>
          <p class="small muted">Repeated games with visibility of kindness reduce defection. Public ledgers act as reputation substrate.</p>
        </div>
      </div>
    </section>

    <!-- =========================================
         LEDGER (KPIs)
         -----------------------------------------
         Plug in real data when ready
    ========================================== -->
    <section id="ledger" class="panel">
      <h2>5) Peace Ripple Ledger (KPIs & Repro)</h2>
      <div class="grid cols-3">
        <div class="panel">
          <h3>Ripple Inputs</h3>
          <ul class="small">
            <li>Stories published: <span class="kpi">—</span></li>
            <li>Micro-donations routed: <span class="kpi">—</span></li>
            <li>Restoration actions logged (trees, kits, meals): <span class="kpi">—</span></li>
          </ul>
        </div>
        <div class="panel">
          <h3>Near-Field Effects</h3>
          <ul class="small">
            <li>Volunteer sign-ups: <span class="kpi">—</span></li>
            <li>Share chains (median depth): <span class="kpi">—</span></li>
            <li>Ceasefire/mediation mentions (local): <span class="kpi">—</span></li>
          </ul>
        </div>
        <div class="panel">
          <h3>Far-Field Signals</h3>
          <ul class="small">
            <li>Δ Conflict events (ACLED): <span class="kpi">—</span></li>
            <li>Δ Battle-deaths (UCDP): <span class="kpi">—</span></li>
            <li>GPI sub-indices drift: <span class="kpi">—</span></li>
          </ul>
        </div>
      </div>

      <div class="panel">
        <h3>PRS Calculator</h3>
        <p class="small muted">Enter standardized effects (z-scores). Negative numbers for reductions in harm.</p>
        <div class="grid cols-3">
          <div><label>ΔConflicts (z): <input id="z1" type="number" step="0.1" value="-0.2"></label></div>
          <div><label>ΔFatalities (z): <input id="z2" type="number" step="0.1" value="-0.1"></label></div>
          <div><label>Mediation (z): <input id="z3" type="number" step="0.1" value="0.15"></label></div>
          <div><label>Donations (z): <input id="z4" type="number" step="0.1" value="0.30"></label></div>
          <div><label>Adoption (z): <input id="z5" type="number" step="0.1" value="0.25"></label></div>
          <div><button class="btn" id="calc">Compute PRS</button></div>
        </div>
        <p>PRS: <strong id="prs">—</strong></p>
      </div>

      <div class="panel">
        <h3>Reproducibility Checklist</h3>
        <ul class="small">
          <li>Archive raw CSVs (ACLED, UCDP) with version tags.</li>
          <li>Pre-register windows; lock hashes; publish code; record nulls.</li>
          <li>Release readable summary for non-technical audiences.</li>
        </ul>
      </div>
    </section>

    <!-- =========================================
         CASE STUDY TEMPLATE
         -----------------------------------------
         Fill with concrete regions/dates later
    ========================================== -->
    <section id="case" class="panel">
      <h2>6) Case-Study Template</h2>
      <ol>
        <li><strong>Context:</strong> Region, actors, baseline conflict patterns.</li>
        <li><strong>Intervention:</strong> Story push, micro-grants, orchard planting, negotiation nudge, etc. (with timestamps and links).</li>
        <li><strong>Design:</strong> Treated vs donor pool; SCM fit metrics; DiD pre-trend tests.</li>
        <li><strong>Results:</strong> Effect sizes with uncertainty; falsification checks; bandwidth sensitivity.</li>
        <li><strong>Interpretation:</strong> Mechanism plausibility (threshold lowering, resource routing, legitimacy effects).</li>
        <li><strong>Limitations:</strong> Confounders, measurement error, missingness.</li>
      </ol>
    </section>

    <!-- =========================================
         CTA — JOIN
         -----------------------------------------
         Mycelial invitation with optional overlays
    ========================================== -->
    <section id="cta" class="panel">
      <h2>7) Join the Mycelium</h2>
      <p>
        If this moved you, let it move through you. Plant a seed, share a story, route a dollar, check on a neighbor, ask for a ceasefire. Small thresholds become global cascades.
      </p>
      <div class="cta">
        <a class="btn" href="https://planetaryrestorationarchive.com" target="_blank" rel="noopener">Planetary Restoration Archive</a>
        <a class="btn" href="#provenance">Verify Provenance</a>
      </div>
      <p class="note">Optional overlays supported: XMR/ETH/SOL donations, teacher micro-grants, orchard kits.</p>
      <div class="panel small">
        <span class="pill">“Donate a dollar, plant a future.”</span>
        <span class="pill">“Share this story; become part of the mycelium.”</span>
        <span class="pill">“No gods. No kings. Just gardeners.”</span>
      </div>
    </section>

    <!-- =========================================
         SOURCES
         -----------------------------------------
         Human-readable list; see bottom of file for
         link-annotated citations.
    ========================================== -->
    <section id="sources" class="panel">
      <h2>8) Sources & Datasets (Human-Readable)</h2>
      <ul class="small">
        <li>UCDP battle-related deaths & conflict counts (annual updates)</li>
        <li>ACLED conflict events/fatalities (rolling)</li>
        <li>IEP Global Peace Index methodology & domain trends</li>
        <li>Watts (2002) global cascades (threshold models)</li>
        <li>Chenoweth & Stephan (2008; 2011) nonviolent campaign effectiveness</li>
      </ul>
      <p class="note">All claims should be read alongside the latest data; the world is non-stationary.</p>
    </section>

    <!-- =========================================
         PROVENANCE
         -----------------------------------------
         Integrity notes; how to verify hashes.
    ========================================== -->
    <section id="provenance" class="panel">
      <h2>9) Provenance & Integrity</h2>
      <p class="small">
        This page is tamper-evident (non-destructive). Update <code>CREDITS</code> and <code>EXPECTED_SHA256_HEX</code> if you intentionally fork. For audited releases, publish a manifest with:
      </p>
      <pre>{
  "name": "PRA Peace Ripple Ledger",
  "version": "1.0.0",
  "author": "Ricky Foster + Navi",
  "site": "https://planetaryrestorationarchive.com",
  "build_date": "2025-10-17",
  "sha256": "<sha256-of-index.html>",
  "datasets": ["ACLED yyyy-mm snapshot", "UCDP v25.x", "IEP GPI 2025"],
  "license": "Creative Commons + Attribution Integrity Clause"
}</pre>
      <p class="note">
        Mythic-Scientific flourish: One pome fruit tree can sequester ~10–20 kg of CO₂ per year in early maturity; a thousand-tree “peace orchard” doubles as a carbon and neighborliness engine—biology conspires with culture.
      </p>
    </section>

    <footer class="center">
      <div class="hr"></div>
      <p class="ghost small">Created by Ricky Foster + Navi · Planetary Restoration Archive</p>
    </footer>
  </div>

  <!-- =========================================
       TLK.IO COLLAPSED OVERLAY (toggle)
       -----------------------------------------
       Default collapsed; click to open chat.
  ========================================== -->
  <div class="float-chat" id="chatBox" aria-live="polite">
    <header>
      <strong>Community Chat (tlk.io)</strong>
      <button class="btn" id="chatToggle" aria-expanded="false">Open</button>
    </header>
    <iframe id="chatFrame" class="hidden" title="tlk.io chat" src="about:blank"></iframe>
  </div>

  <!-- =========================================
       IndexedDB MNEMONIC (no account signup)
       -----------------------------------------
       Store a local-only mnemonic alias for gentle personalization.
  ========================================== -->
  <script>
  const DB_NAME = "pra_mnemonic_db";
  const DB_STORE = "profile";
  function openDB(){
    return new Promise((resolve, reject)=>{
      const req = indexedDB.open(DB_NAME, 1);
      req.onupgradeneeded = (e)=> e.target.result.createObjectStore(DB_STORE, {keyPath:"id"});
      req.onsuccess = ()=> resolve(req.result);
      req.onerror = ()=> reject(req.error);
    });
  }
  async function saveMnemonic(alias){
    const db = await openDB();
    const tx = db.transaction(DB_STORE, "readwrite");
    tx.objectStore(DB_STORE).put({id:"me", alias, ts:Date.now()});
    return tx.complete;
  }
  async function readMnemonic(){
    const db = await openDB();
    return new Promise(res=>{
      const tx = db.transaction(DB_STORE, "readonly");
      const req = tx.objectStore(DB_STORE).get("me");
      req.onsuccess = ()=> res(req.result?.alias || "");
      req.onerror = ()=> res("");
    });
  }
  // Simple greeting
  (async ()=>{
    const alias = await readMnemonic();
    if(!alias){
      const a = prompt("Pick a mnemonic alias to sign your ripples (local only):","Stargazer");
      if(a) await saveMnemonic(a);
    }
  })();
  </script>

  <!-- =========================================
       CHART + PRS Logic
       -----------------------------------------
       Draw illustrative cascade window and PRS calc.
  ========================================== -->
  <script>
    // PRS
    document.getElementById("calc").addEventListener("click", ()=>{
      const zs = [1,2,3,4,5].map(i=> parseFloat(document.getElementById("z"+i).value||0));
      // modest weights; tune with cross-validation offline
      const w = [0.30, 0.25, 0.20, 0.15, 0.10];
      const prs = zs.reduce((s,z,idx)=> s + z*w[idx], 0);
      document.getElementById("prs").textContent = prs.toFixed(3);
    });

    // Cascade chart (fake illustrative curve)
    const ctx = document.getElementById("cascadeChart");
    const dataX = Array.from({length:41}, (_,i)=> i/40); // threshold from 0..1
    const dataY = dataX.map(x => Math.max(0, Math.sin(3.2*(1-x)) * (1-x) )); // bell-ish window
    new Chart(ctx, {
      type: "line",
      data: { labels: dataX.map(x=>x.toFixed(2)), datasets: [{ label: "Cascade Likelihood (illustrative)", data: dataY }]},
      options: {
        responsive:true,
        scales:{ x:{ title:{display:true, text:"Average Threshold (θ)"} }, y:{ title:{display:true, text:"Large Cascade Probability (arb.)"} } },
        plugins:{ legend:{display:false} }
      }
    });

    // Chat toggle
    const chatBtn = document.getElementById("chatToggle");
    const chatFrame = document.getElementById("chatFrame");
    chatBtn.addEventListener("click", ()=>{
      const open = chatFrame.classList.contains("hidden");
      if(open){ chatFrame.src = "https://tlk.io/planetaryrestorationarchive"; }
      chatFrame.classList.toggle("hidden");
      chatBtn.textContent = open ? "Close" : "Open";
      chatBtn.setAttribute("aria-expanded", String(open));
    });
  </script>
</body>
</html>